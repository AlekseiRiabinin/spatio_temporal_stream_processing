##############################
# Basic server configurations
##############################

broker.id=1
node.id=1

listeners=PLAINTEXT://0.0.0.0:19092,CONTROLLER://0.0.0.0:19093
advertised.listeners=PLAINTEXT://kafka-1:19092

log.dirs=/bitnami/kafka/data

##############################
# KRaft mode settings
##############################

process.roles=broker,controller
controller.listener.names=CONTROLLER
controller.quorum.voters=1@kafka-1:19093

##############################
# Log retention settings
##############################

log.retention.hours=8
log.segment.bytes=536870912
log.retention.check.interval.ms=300000

##############################
# Replication settings
##############################

num.partitions=20
default.replication.factor=1
min.insync.replicas=1

##############################
# Security settings
##############################

listener.security.protocol.map=CONTROLLER:PLAINTEXT,PLAINTEXT:PLAINTEXT
inter.broker.listener.name=PLAINTEXT

##############################
# Performance tuning
##############################

num.network.threads=3
num.io.threads=8

message.max.bytes=10485760
replica.fetch.max.bytes=10485760
socket.request.max.bytes=10485760

compression.type=snappy
batch.size=200000
linger.ms=5

auto.create.topics.enable=false

##############################
# Coordinator stability
##############################

# Reduce rebalance storms
group.initial.rebalance.delay.ms=0
group.min.session.timeout.ms=6000
group.max.session.timeout.ms=300000

# Heartbeat stability for Flink consumers
heartbeat.interval.ms=3000
session.timeout.ms=45000

# Increase request timeouts
request.timeout.ms=30000
replica.lag.time.max.ms=30000

##############################
# Log cleaner stability
##############################

log.cleaner.enable=true
log.cleaner.threads=2
log.cleaner.io.max.bytes.per.second=104857600

##############################
# Metadata refresh
##############################

metadata.max.age.ms=300000

##############################
# Internal Kafka topics
##############################

offsets.topic.replication.factor=1
transaction.state.log.replication.factor=1
transaction.state.log.min.isr=1
